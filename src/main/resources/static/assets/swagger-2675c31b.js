import{p as c,c as k,V as x,o as d,e as g,h as s,f as e,w as n,i as w,D as A,S as P,as as L,Y as h,B as f,E as B,at as V,ap as C,aq as N}from"./index-df968ec9.js";/* empty css                   */import{_ as T}from"./_plugin-vue_export-helper-8da67cfc.js";const U={class:"swagger-container"},M={class:"swagger-content"},R={class:"swagger-toolbar"},S={class:"swagger-iframe-container"},D=["src"],F={key:0,class:"loading-overlay"},W={key:1,class:"error-overlay"},q={__name:"swagger",setup(Y){const r=c(!0),l=c(!1),v=c(""),o=c(null),i=k(()=>`${{}.VITE_API_BASE_URL||"http://localhost:8080"}/swagger-ui/index.html`),I=()=>{r.value=!1,l.value=!1;try{const a=o.value;a&&a.contentWindow&&a.contentWindow.addEventListener("error",()=>{_("API文档加载失败，请检查后端服务是否正常运行")})}catch{console.warn("无法访问iframe内容，可能是跨域限制")}},_=a=>{r.value=!1,l.value=!0,v.value=a},y=()=>{window.open(i.value,"_blank")},m=()=>{r.value=!0,l.value=!1,o.value&&(o.value.src=i.value),A.success("正在刷新API文档...")};return x(()=>{o.value&&o.value.addEventListener("error",()=>{_("无法连接到API文档服务")}),setTimeout(()=>{r.value&&_("API文档加载超时，请检查网络连接")},1e4)}),(a,t)=>{const p=B,u=P,E=V,b=L;return d(),g("div",U,[t[3]||(t[3]=s("div",{class:"swagger-header"},[s("h2",null,"API文档"),s("p",null,"系统API接口文档，基于Swagger生成")],-1)),s("div",M,[s("div",R,[e(u,{type:"primary",onClick:y},{default:n(()=>[e(p,null,{default:n(()=>[e(h(C))]),_:1}),t[0]||(t[0]=f(" 在新窗口打开 ",-1))]),_:1,__:[0]}),e(u,{onClick:m},{default:n(()=>[e(p,null,{default:n(()=>[e(h(N))]),_:1}),t[1]||(t[1]=f(" 刷新文档 ",-1))]),_:1,__:[1]})]),s("div",S,[s("iframe",{ref_key:"swaggerFrame",ref:o,src:i.value,frameborder:"0",width:"100%",height:"100%",onLoad:I},null,40,D),r.value?(d(),g("div",F,[e(E,{"element-loading-text":"正在加载API文档...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"})])):w("",!0),l.value?(d(),g("div",W,[e(b,{icon:"error",title:"加载失败","sub-title":v.value},{extra:n(()=>[e(u,{type:"primary",onClick:m},{default:n(()=>t[2]||(t[2]=[f("重新加载",-1)])),_:1,__:[2]})]),_:1},8,["sub-title"])])):w("",!0)])])])}}},G=T(q,[["__scopeId","data-v-37efc98a"]]);export{G as default};
