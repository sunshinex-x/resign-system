import{u as x,m as V,p as f,V as M,o as i,e as u,f as s,w as a,D as d,O as U,h as c,B as l,y as F,t as o,F as O,j as R,a as k,i as b,S as G,ad as P,$ as A,ah as j,ae as J,a8 as $}from"./index-df968ec9.js";/* empty css                   *//* empty css                *//* empty css                             *//* empty css                *//* empty css               */import{_ as q}from"./_plugin-vue_export-helper-8da67cfc.js";import{h as z,r as H}from"./iosTask-a938902d.js";import"./request-5c3d6a99.js";const K={class:"task-detail"},Q={class:"card-header"},W={key:0},X={class:"bundle-id"},Y={key:1},Z={key:1},ee={key:0,class:"action-buttons"},ae={class:"log-content"},te={__name:"detail",setup(se){const h=x(),E=V(),_=f(!1),p=f(!1),e=f({}),v=async()=>{_.value=!0;try{const t=await z(h.params.id);t.code===200&&t.data?e.value=t.data:d.error("获取任务详情失败: "+(t.message||"未知错误"))}catch(t){console.error("获取任务详情失败:",t),d.error("获取任务详情失败")}finally{_.value=!1}},D=async()=>{p.value=!0;try{const t=await H(e.value.id);t.code===200?(d.success("任务重试成功"),v()):d.error("任务重试失败: "+(t.message||"未知错误"))}catch(t){console.error("任务重试失败:",t),d.error("任务重试失败")}finally{p.value=!1}},S=()=>{E.push("/task/ios")},I=t=>({PENDING:"info",PROCESSING:"warning",SUCCESS:"success",FAILED:"danger"})[t]||"info",C=t=>({PENDING:"等待中",PROCESSING:"处理中",SUCCESS:"成功",FAILED:"失败"})[t]||t;return M(()=>{v()}),(t,r)=>{const m=G,n=P,N=A,w=j,L=J,g=U,T=$;return i(),u("div",K,[s(g,null,{header:a(()=>[c("div",Q,[r[1]||(r[1]=c("span",null,"iOS任务详情",-1)),s(m,{type:"primary",onClick:S},{default:a(()=>r[0]||(r[0]=[l("返回列表",-1)])),_:1,__:[0]})])]),default:a(()=>[F((i(),u("div",null,[s(L,{column:2,border:""},{default:a(()=>[s(n,{label:"任务ID"},{default:a(()=>[l(o(e.value.id),1)]),_:1}),s(n,{label:"应用名称"},{default:a(()=>[l(o(e.value.appName||"-"),1)]),_:1}),s(n,{label:"应用版本"},{default:a(()=>[l(o(e.value.appVersion||"-"),1)]),_:1}),s(n,{label:"构建版本"},{default:a(()=>[l(o(e.value.buildVersion||"-"),1)]),_:1}),s(n,{label:"任务状态"},{default:a(()=>[s(N,{type:I(e.value.status)},{default:a(()=>[l(o(C(e.value.status)),1)]),_:1},8,["type"])]),_:1}),s(n,{label:"证书ID"},{default:a(()=>[l(o(e.value.certificateId||"-"),1)]),_:1}),s(n,{label:"Bundle ID配置"},{default:a(()=>[e.value.bundleIdConfig?(i(),u("div",W,[(i(!0),u(O,null,R(JSON.parse(e.value.bundleIdConfig||"{}"),(B,y)=>(i(),u("div",{key:y,class:"bundle-config"},[c("span",X,o(y),1),l(": "+o(B),1)]))),128))])):(i(),u("span",Y,"-"))]),_:1}),s(n,{label:"回调地址"},{default:a(()=>[l(o(e.value.callbackUrl||"-"),1)]),_:1}),s(n,{label:"创建时间"},{default:a(()=>[l(o(e.value.createTime||"-"),1)]),_:1}),s(n,{label:"完成时间"},{default:a(()=>[l(o(e.value.finishTime||"-"),1)]),_:1}),s(n,{label:"下载地址",span:2},{default:a(()=>[e.value.downloadUrl?(i(),k(w,{key:0,href:e.value.downloadUrl,type:"primary",target:"_blank"},{default:a(()=>[l(o(e.value.downloadUrl),1)]),_:1},8,["href"])):(i(),u("span",Z,"-"))]),_:1}),s(n,{label:"任务描述",span:2},{default:a(()=>[l(o(e.value.description||"-"),1)]),_:1})]),_:1}),e.value.status==="FAILED"?(i(),u("div",ee,[s(m,{type:"warning",onClick:D,loading:p.value},{default:a(()=>r[2]||(r[2]=[l(" 重试任务 ",-1)])),_:1,__:[2]},8,["loading"])])):b("",!0),e.value.processLog?(i(),k(g,{key:1,class:"log-card"},{header:a(()=>r[3]||(r[3]=[c("span",null,"处理日志",-1)])),default:a(()=>[c("pre",ae,o(e.value.processLog),1)]),_:1})):b("",!0)])),[[T,_.value]])]),_:1})])}}},pe=q(te,[["__scopeId","data-v-84a76712"]]);export{pe as default};
