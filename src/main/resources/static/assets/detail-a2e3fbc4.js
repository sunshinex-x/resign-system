import{u as L,m as x,p as f,V as B,o as u,e as i,f as t,w as e,D as d,O as M,h as c,B as s,y as U,t as o,a as g,i as k,S as V,ad as A,$ as R,ah as F,ae as G,a8 as P}from"./index-df968ec9.js";/* empty css                   *//* empty css                *//* empty css                             *//* empty css                *//* empty css               */import{_ as O}from"./_plugin-vue_export-helper-8da67cfc.js";import{h as $,r as j}from"./androidTask-1b67fdfa.js";import"./request-5c3d6a99.js";const q={class:"task-detail"},z={class:"card-header"},H={key:1},J={key:0,class:"action-buttons"},K={class:"log-content"},Q={__name:"detail",setup(W){const b=L(),E=x(),_=f(!1),p=f(!1),a=f({}),v=async()=>{_.value=!0;try{const l=await $(b.params.id);l.code===200&&l.data?a.value=l.data:d.error("获取任务详情失败: "+(l.message||"未知错误"))}catch(l){console.error("获取任务详情失败:",l),d.error("获取任务详情失败")}finally{_.value=!1}},h=async()=>{p.value=!0;try{const l=await j(a.value.id);l.code===200?(d.success("任务重试成功"),v()):d.error("任务重试失败: "+(l.message||"未知错误"))}catch(l){console.error("任务重试失败:",l),d.error("任务重试失败")}finally{p.value=!1}},D=()=>{E.push("/task/android")},S=l=>({PENDING:"info",PROCESSING:"warning",SUCCESS:"success",FAILED:"danger"})[l]||"info",C=l=>({PENDING:"等待中",PROCESSING:"处理中",SUCCESS:"成功",FAILED:"失败"})[l]||l;return B(()=>{v()}),(l,r)=>{const m=V,n=A,N=R,I=F,w=G,y=M,T=P;return u(),i("div",q,[t(y,null,{header:e(()=>[c("div",z,[r[1]||(r[1]=c("span",null,"Android任务详情",-1)),t(m,{type:"primary",onClick:D},{default:e(()=>r[0]||(r[0]=[s("返回列表",-1)])),_:1,__:[0]})])]),default:e(()=>[U((u(),i("div",null,[t(w,{column:2,border:""},{default:e(()=>[t(n,{label:"任务ID"},{default:e(()=>[s(o(a.value.id),1)]),_:1}),t(n,{label:"应用名称"},{default:e(()=>[s(o(a.value.appName||"-"),1)]),_:1}),t(n,{label:"应用版本"},{default:e(()=>[s(o(a.value.appVersion||"-"),1)]),_:1}),t(n,{label:"版本代码"},{default:e(()=>[s(o(a.value.versionCode||"-"),1)]),_:1}),t(n,{label:"任务状态"},{default:e(()=>[t(N,{type:S(a.value.status)},{default:e(()=>[s(o(C(a.value.status)),1)]),_:1},8,["type"])]),_:1}),t(n,{label:"签名类型"},{default:e(()=>[s(o(a.value.signType||"-"),1)]),_:1}),t(n,{label:"密钥库文件"},{default:e(()=>[s(o(a.value.keystoreFile||"-"),1)]),_:1}),t(n,{label:"密钥别名"},{default:e(()=>[s(o(a.value.keyAlias||"-"),1)]),_:1}),t(n,{label:"包名"},{default:e(()=>[s(o(a.value.packageName||"-"),1)]),_:1}),t(n,{label:"渠道信息"},{default:e(()=>[s(o(a.value.channelInfo||"-"),1)]),_:1}),t(n,{label:"回调地址"},{default:e(()=>[s(o(a.value.callbackUrl||"-"),1)]),_:1}),t(n,{label:"创建时间"},{default:e(()=>[s(o(a.value.createTime||"-"),1)]),_:1}),t(n,{label:"完成时间"},{default:e(()=>[s(o(a.value.finishTime||"-"),1)]),_:1}),t(n,{label:"下载地址",span:2},{default:e(()=>[a.value.downloadUrl?(u(),g(I,{key:0,href:a.value.downloadUrl,type:"primary",target:"_blank"},{default:e(()=>[s(o(a.value.downloadUrl),1)]),_:1},8,["href"])):(u(),i("span",H,"-"))]),_:1}),t(n,{label:"任务描述",span:2},{default:e(()=>[s(o(a.value.description||"-"),1)]),_:1})]),_:1}),a.value.status==="FAILED"?(u(),i("div",J,[t(m,{type:"warning",onClick:h,loading:p.value},{default:e(()=>r[2]||(r[2]=[s(" 重试任务 ",-1)])),_:1,__:[2]},8,["loading"])])):k("",!0),a.value.processLog?(u(),g(y,{key:1,class:"log-card"},{header:e(()=>r[3]||(r[3]=[c("span",null,"处理日志",-1)])),default:e(()=>[c("pre",K,o(a.value.processLog),1)]),_:1})):k("",!0)])),[[T,_.value]])]),_:1})])}}},ne=O(Q,[["__scopeId","data-v-cb597971"]]);export{ne as default};
