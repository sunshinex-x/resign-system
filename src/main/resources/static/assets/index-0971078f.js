import{c as v,o as n,a as i,w as a,r as G,n as K,g as U,b as y,d as M,e as g,f as l,h as m,t as k,i as I,F as C,j as S,E as A,k as W,l as H,u as T,m as z,p as q,q as J,s as O,v as Q,x as X,y as Y,z as Z,A as ee,B as $,T as te,K as ae,C as ne,D as oe,G as se,H as re,I as le,J as ie,L as ce,M as ue}from"./index-df968ec9.js";import{_ as F}from"./_plugin-vue_export-helper-8da67cfc.js";/* empty css                   *//* empty css                  */import{u as me}from"./auth-c297849c.js";import{i as B}from"./validate-ec87a090.js";import"./request-5c3d6a99.js";const de="/assets/logo-0f3ef3be.svg";const _e={__name:"Link",props:{to:{type:String,required:!0}},setup(s){const e=s,o=v(()=>B(e.to)?"a":"router-link"),p=v(()=>B(e.to)?{href:e.to,target:"_blank",rel:"noopener"}:{to:e.to});return(c,b)=>(n(),i(y(o.value),K(U(p.value)),{default:a(()=>[G(c.$slots,"default")]),_:3},16))}},pe={key:0},fe={__name:"SidebarItem",props:{item:{type:Object,required:!0},basePath:{type:String,default:""}},setup(s){const e=s,o=v(()=>!e.item.children||!Array.isArray(e.item.children)?[]:e.item.children.filter(t=>t&&(!t.meta||!t.meta.hidden))),p=v(()=>e.item.meta&&e.item.meta.alwaysShow?!1:o.value.length===0||o.value.length===1&&(!e.item.meta||!e.item.meta.alwaysShow)),c=v(()=>o.value.length===1?u(o.value[0].path):u(e.item.path)),b=v(()=>o.value.length===1&&o.value[0].meta&&o.value[0].meta.icon?o.value[0].meta.icon:e.item.meta&&e.item.meta.icon),d=v(()=>o.value.length===1&&o.value[0].meta&&o.value[0].meta.title?o.value[0].meta.title:e.item.meta&&e.item.meta.title),u=t=>{if(!t)return e.basePath||"/";if(B(t))return t;if(B(e.basePath))return e.basePath;if(t.startsWith("/"))return t;if(e.basePath){const h=e.basePath.replace(/\/$/,"");return(h.startsWith("/")?h:"/"+h)+"/"+t}return"/"+t};return(t,h)=>{const _=A,f=W,r=M("sidebar-item",!0),E=H;return s.item&&(!s.item.meta||!s.item.meta.hidden)?(n(),g("div",pe,[p.value?(n(),i(_e,{key:0,to:c.value},{default:a(()=>[l(f,{index:c.value},{title:a(()=>[m("span",null,k(d.value),1)]),default:a(()=>[b.value?(n(),i(_,{key:0},{default:a(()=>[(n(),i(y(b.value)))]),_:1})):I("",!0)]),_:1},8,["index"])]),_:1},8,["to"])):(n(),i(E,{key:1,index:u(s.item.path)},{title:a(()=>[s.item.meta&&s.item.meta.icon?(n(),i(_,{key:0},{default:a(()=>[(n(),i(y(s.item.meta.icon)))]),_:1})):I("",!0),m("span",null,k(s.item.meta&&s.item.meta.title),1)]),default:a(()=>[(n(!0),g(C,null,S(o.value,w=>(n(),i(r,{key:w.path,item:w,"base-path":u(s.item.path)},null,8,["item","base-path"]))),128))]),_:1},8,["index"]))])):I("",!0)}}};const ve={key:0,class:"no-redirect"},he=["onClick"],be={__name:"Breadcrumb",setup(s){const e=T(),o=z(),p=q([]),c=()=>{let d=e.matched.filter(t=>t.meta&&t.meta.title);const u=d[0];u&&u.path!=="/dashboard"&&(d=[{path:"/dashboard",meta:{title:"首页"},redirect:"/dashboard"}].concat(d)),p.value=d},b=d=>{const{redirect:u,path:t}=d;if(u){o.push(u);return}o.push(t)};return J(()=>e.path,()=>c(),{immediate:!0}),(d,u)=>{const t=Q,h=X;return n(),i(h,{separator:"/",class:"app-breadcrumb"},{default:a(()=>[(n(!0),g(C,null,S(p.value,(_,f)=>(n(),i(t,{key:_.path},{default:a(()=>[f===p.value.length-1||!_.redirect?(n(),g("span",ve,k(_.meta.title),1)):(n(),g("a",{key:1,onClick:O(r=>b(_),["prevent"])},k(_.meta.title),9,he))]),_:2},1024))),128))]),_:1})}}},ge=F(be,[["__scopeId","data-v-4bb45ba6"]]);const ye={class:"app-wrapper"},ke={class:"logo-container"},we={class:"title"},xe={class:"main-container"},Be={class:"navbar"},Ee={class:"left-menu"},Ie={class:"right-menu"},Me={class:"avatar-container"},Ce={class:"username"},Se={class:"app-main"},De={__name:"index",setup(s){const e=z(),o=T(),p=me(),c=q(!1),b=()=>{c.value=!c.value},d=v(()=>e.options.routes.filter(f=>{var r;return!((r=f.meta)!=null&&r.hidden)})),u=v(()=>{const{meta:f,path:r}=o;return f.activeMenu?f.activeMenu:r}),t=v(()=>p.currentUser),h=()=>{e.push("/profile")},_=async()=>{try{await ne.confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),p.logout(),oe.success("退出登录成功"),e.push("/login")}catch{}};return(f,r)=>{const E=se,w=re,D=A,L=le,N=M("CaretBottom"),P=ie,V=ce,R=ue,j=M("router-view");return n(),g("div",ye,[m("div",{class:ee(["sidebar-container",{"is-collapse":c.value}])},[m("div",ke,[r[0]||(r[0]=m("img",{src:de,alt:"logo",class:"logo"},null,-1)),Y(m("h1",we,"重签名管理系统",512),[[Z,!c.value]])]),l(w,null,{default:a(()=>[l(E,{"default-active":u.value,collapse:c.value,"unique-opened":!0,"collapse-transition":!1,"background-color":"transparent","text-color":"rgba(255, 255, 255, 0.8)","active-text-color":"#ffffff",router:"",class:"sidebar-menu"},{default:a(()=>[(n(!0),g(C,null,S(d.value,x=>(n(),i(fe,{key:x.path,item:x,"base-path":""},null,8,["item"]))),128))]),_:1},8,["default-active","collapse"])]),_:1})],2),m("div",xe,[m("div",Be,[m("div",Ee,[l(D,{class:"hamburger",onClick:b},{default:a(()=>[(n(),i(y(c.value?"Expand":"Fold")))]),_:1}),l(ge)]),m("div",Ie,[l(R,{trigger:"click"},{dropdown:a(()=>[l(V,null,{default:a(()=>[l(P,{onClick:h},{default:a(()=>r[1]||(r[1]=[$("个人中心",-1)])),_:1,__:[1]}),l(P,{divided:"",onClick:_},{default:a(()=>r[2]||(r[2]=[$("退出登录",-1)])),_:1,__:[2]})]),_:1})]),default:a(()=>[m("div",Me,[l(L,{size:30,icon:"UserFilled"}),m("span",Ce,k(t.value.nickname||t.value.username||"管理员"),1),l(D,null,{default:a(()=>[l(N)]),_:1})])]),_:1})])]),m("div",Se,[l(j,null,{default:a(({Component:x})=>[l(te,{name:"fade-transform",mode:"out-in"},{default:a(()=>[(n(),i(ae,null,[(n(),i(y(x)))],1024))]),_:2},1024)]),_:1})])])])}}},Le=F(De,[["__scopeId","data-v-3e9f5b38"]]);export{Le as default};
